@use "@coreui/coreui/scss/variables" as cui;
@use "@coreui/coreui/scss/mixins/color-mode" as color-mode;

// General Dashboard Enhancements
.dashboard-card-title {
  font-size: 1rem; // Standardized size for card titles
  font-weight: 500;
  color: var(--cui-body-color);
  margin-bottom: 0.5rem; // Add some space below title
}

// Metric Card Specific Styles
c-widget-stat-a {
  padding: 1.25rem; // Consistent padding for cards

  .text-medium-emphasis { // This is often used for the card title/label (already handled by .dashboard-card-title)
    // font-weight: 500 !important;
    // color: var(--cui-body-color) !important;
  }

  .fs-3.fw-semibold { // This is often used for the main value
    font-size: 1.75rem !important; // Slightly larger value text
    color: var(--cui-body-color) !important;
  }

  .d-flex.align-items-center {
    margin-top: 0.5rem; // Space between title and value/trend line
  }
}

// Trend indicator icon and text enhancements
.trend-indicator {
  font-size: 0.9rem; // Slightly larger trend text
  font-weight: 500; // Bolder trend text
  margin-left: 0.35rem;
  display: inline-flex; // Align icon and text better
  align-items: center;

  c-icon {
    margin-right: 0.2rem;
    font-size: 1.1em; // Make icon slightly larger relative to text
  }

  &.positive {
    color: var(--cui-success);
  }
  &.negative {
    color: var(--cui-danger);
  }
  &.neutral {
    color: var(--cui-gray-600); // More distinct neutral color
  }
}

// Dark Theme Adjustments
@include color-mode.color-mode(dark) {
  .dashboard-card-title {
    color: var(--cui-gray-200); // Brighter title for dark mode
  }

  c-widget-stat-a {
    background-color: var(--cui-gray-800); // Slightly different shade for cards
    border: 1px solid var(--cui-gray-700); // Subtle accent border

    .text-medium-emphasis { // Label in dark mode
      color: var(--cui-gray-300) !important;
    }

    .fs-3.fw-semibold { // Value in dark mode
      color: var(--cui-white) !important;
    }
  }

  .trend-indicator {
    &.positive {
      color: var(--cui-green); // CoreUI green variable
    }
    &.negative {
      color: var(--cui-red); // CoreUI red variable
    }
    &.neutral {
      color: var(--cui-gray-500);
    }
  }

  // Ensure text on colored cards (success, warning) has enough contrast in dark mode
  c-widget-stat-a[color="success"] {
    .dashboard-card-title, .fs-3.fw-semibold, .trend-indicator {
      color: var(--cui-white) !important; // Ensure text is white on success bg
    }
    .trend-indicator.positive { color: var(--cui-white) !important; }
    .trend-indicator.negative { color: var(--cui-white) !important; }
    .trend-indicator.neutral { color: var(--cui-light) !important; }
  }

  c-widget-stat-a[color="warning"] {
    .dashboard-card-title, .fs-3.fw-semibold, .trend-indicator {
      color: var(--cui-black) !important; // Ensure text is dark on warning bg
    }
     .trend-indicator.positive { color: var(--cui-black) !important; }
     .trend-indicator.negative { color: var(--cui-black) !important; }
     .trend-indicator.neutral { color: var(--cui-black) !important; }
  }
  c-widget-stat-a[color="info"] {
    .dashboard-card-title, .fs-3.fw-semibold, .trend-indicator {
      color: var(--cui-white) !important; 
    }
  }
 c-widget-stat-a[color="primary"] {
    .dashboard-card-title, .fs-3.fw-semibold, .trend-indicator {
      color: var(--cui-white) !important; 
    }
  }
}

// Light Theme Adjustments
@include color-mode.color-mode(light) {
  c-widget-stat-a {
    background-color: var(--cui-white); // Explicit white background for cards
    box-shadow: 0 2px 4px rgba(0,0,0,.075); // Soft shadow for depth
    border: 1px solid var(--cui-gray-200); // Light border

    .text-medium-emphasis { // Label in light mode
        color: var(--cui-gray-700) !important;
    }
    .fs-3.fw-semibold { // Value in light mode
        color: var(--cui-body-color) !important;
    }
  }

  // Ensure text on warning widget (which is often light yellow) is dark enough
  c-widget-stat-a[color="warning"] {
    .dashboard-card-title,
    .fs-3.fw-semibold,
    .trend-indicator {
      color: var(--cui-black) !important; // Ensure text is dark on light warning background
    }
  }

  // Ensure text on success widget is dark enough (CoreUI default is light)
  c-widget-stat-a[color="success"] {
    .dashboard-card-title,
    .fs-3.fw-semibold,
    .trend-indicator {
      color: var(--cui-white) !important;
    }
  }
}

// Chart specific styling
.chart-legend-above {
  text-align: left; // Align with dropdown as requested
  margin-bottom: 1rem;
  font-weight: 600; // Bolder chart title
  font-size: 1.2rem; // Larger chart title
  color: var(--cui-body-color);
}

// Add padding between summary cards and graph section
c-row.mb-4:has(c-widget-stat-a) + c-row.mb-4:has(c-card c-chart) {
  margin-top: 2rem !important; // Add more top margin to the chart row specifically
}

// Align dropdown with chart title - this can be tricky with current HTML structure
// Assuming the dropdown is the last element in its row, and title is first in its row.
// A more robust solution might involve HTML structure changes.
// For now, we adjust the chart title alignment to be left.

// Adjustments for card color contrast on specific card types (if needed beyond CoreUI defaults)
// Example for a `info` colored card to ensure text is white
// c-widget-stat-a[color="info"] {
//   .dashboard-card-title, .fs-3.fw-semibold, .trend-indicator {
//     color: var(--cui-white) !important;
//   }
// }
