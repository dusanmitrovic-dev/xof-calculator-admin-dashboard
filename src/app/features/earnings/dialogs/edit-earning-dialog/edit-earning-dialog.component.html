<!-- This can be almost identical to add-earning-dialog.component.html -->
<!-- Just change the title and the final save button text -->

<h2 mat-dialog-title>Edit Earning Record</h2>

<form [formGroup]="editForm" (ngSubmit)="onSave()">
  <mat-dialog-content class="edit-earning-content"> <!-- Use a specific class if needed -->
    <p>Update the details for this earning entry.</p>

    <!-- User ID Field (Consider making readonly if UserID shouldn't change) -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>User ID</mat-label>
      <input matInput formControlName="userId" required placeholder="Paste User ID Mention (e.g., <@123...>)" readonly> <!-- Readonly recommended -->
       <mat-hint>User ID cannot be changed.</mat-hint>
      <!-- <mat-error *ngIf="f['userId'].errors?.['required']">User ID is required.</mat-error>
      <mat-error *ngIf="f['userId'].errors?.['pattern']">Invalid format (use <@UserID>).</mat-error> -->
    </mat-form-field>

    <!-- Date Field -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="date" required readonly placeholder="Select a date">
      <mat-hint>MM/DD/YYYY</mat-hint>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="f['date'].errors?.['required']">Date is required.</mat-error>
    </mat-form-field>

     <!-- Gross Revenue / Total Cut / Hours -->
    <div class="form-row">
        <mat-form-field appearance="outline">
          <mat-label>Gross Revenue ($)</mat-label>
          <input matInput type="number" formControlName="gross_revenue" required min="0" step="0.01" placeholder="0.00">
          <mat-error *ngIf="f['gross_revenue'].errors?.['required']">Required</mat-error>
          <mat-error *ngIf="f['gross_revenue'].errors?.['min']">Must be 0 or more</mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Total Cut ($)</mat-label>
          <input matInput type="number" formControlName="total_cut" required min="0" step="0.01" placeholder="0.00">
          <mat-error *ngIf="f['total_cut'].errors?.['required']">Required</mat-error>
          <mat-error *ngIf="f['total_cut'].errors?.['min']">Must be 0 or more</mat-error>
        </mat-form-field>
         <mat-form-field appearance="outline">
          <mat-label>Hours Worked</mat-label>
          <input matInput type="number" formControlName="hours_worked" min="0" step="0.1" placeholder="0.0">
           <mat-error *ngIf="f['hours_worked'].errors?.['min']">Must be 0 or more</mat-error>
        </mat-form-field>
    </div>

    <!-- Role / Models -->
     <div class="form-row">
        <mat-form-field appearance="outline">
            <mat-label>Role</mat-label>
             <mat-select formControlName="role">
                 <mat-option [value]="null">-- Select Role --</mat-option>
                 <mat-option *ngFor="let role of roles$ | async" [value]="role.name">{{role.name}}</mat-option>
             </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>Model(s)</mat-label>
            <mat-select formControlName="models">
                 <mat-option [value]="null">-- Select Model --</mat-option>
                 <mat-option *ngFor="let model of models$ | async" [value]="model">{{model}}</mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <!-- Period / Shift -->
    <div class="form-row">
        <mat-form-field appearance="outline">
              <mat-label>Period</mat-label>
              <mat-select formControlName="period" required>
                   <mat-option [value]="null">-- Select Period --</mat-option>
                   <mat-option *ngFor="let p of periods$ | async" [value]="p">{{p}}</mat-option>
              </mat-select>
              <mat-error *ngIf="f['period'].errors?.['required']">Period is required.</mat-error>
          </mat-form-field>
           <mat-form-field appearance="outline">
              <mat-label>Shift</mat-label>
              <mat-select formControlName="shift" required>
                  <mat-option [value]="null">-- Select Shift --</mat-option>
                   <mat-option *ngFor="let s of shifts$ | async" [value]="s">{{s}}</mat-option>
              </mat-select>
              <mat-error *ngIf="f['shift'].errors?.['required']">Shift is required.</mat-error>
          </mat-form-field>
    </div>

  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-stroked-button type="button" (click)="onCancel()">Cancel</button>
    <!-- Disable button if form is invalid OR pristine (no changes made) -->
    <button mat-flat-button color="primary" type="submit" [disabled]="editForm.invalid || editForm.pristine">Update Record</button>
  </mat-dialog-actions>
</form>
