<div class="page-container">
  <!-- <h1>Display Settings</h1> -->
  <p class="page-description">Configure how the associated Discord bot displays information and identifies itself.</p>

  <app-config-card title="Bot & Display Configuration" [loading]="isLoading">
    <div card-actions>
      <button
        mat-flat-button
        color="primary"
        (click)="onSubmit()"
        [disabled]="isLoading || !displayForm || displayForm.pristine || !displayForm.valid"
        matTooltip="Save display settings"
      >
        <mat-icon>save</mat-icon> Save Changes
      </button>
    </div>

    <div card-content>
      <form [formGroup]="displayForm" *ngIf="displayForm && !isLoading" novalidate>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width-field">
            <mat-label>Agency Name</mat-label>
            <input matInput formControlName="agency_name" placeholder="Your Agency Name" required>
            <mat-hint>Used in bot messages and potentially UI elements.</mat-hint>
            <mat-error *ngIf="displayForm.get('agency_name')?.hasError('required')">
              Agency name is required.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width-field">
            <mat-label>Bot Name</mat-label>
            <input matInput formControlName="bot_name" placeholder="Discord Bot Name" required>
             <mat-hint>The display name for the Discord bot.</mat-hint>
            <mat-error *ngIf="displayForm.get('bot_name')?.hasError('required')">
              Bot name is required.
            </mat-error>
          </mat-form-field>
        </div>

        <div class="toggles-section">
           <h3 class="section-title">Bot Behavior</h3>
           <div class="toggles-container">
              <mat-slide-toggle formControlName="ephemeral_responses" color="primary" class="form-toggle">
                Use Ephemeral Responses
                 <mat-icon matTooltip="If enabled, bot command responses will only be visible to the user who invoked the command.">help_outline</mat-icon>
              </mat-slide-toggle>

              <mat-slide-toggle formControlName="show_average" color="primary" class="form-toggle">
                Show Average Calculations
                 <mat-icon matTooltip="If enabled, the bot may include average calculations (e.g., average hourly rate) in reports or summaries.">help_outline</mat-icon>
              </mat-slide-toggle>

              <mat-slide-toggle formControlName="show_ids" color="primary" class="form-toggle">
                Show Discord IDs
                 <mat-icon matTooltip="If enabled, the bot's output may include raw Discord User IDs and Role IDs. Disable for cleaner output.">help_outline</mat-icon>
              </mat-slide-toggle>
            </div>
        </div>

      </form>
      <p *ngIf="!displayForm && !isLoading" class="error-message">
        Could not initialize the display settings form. Please try refreshing the page.
      </p>
    </div>
  </app-config-card>

</div>
