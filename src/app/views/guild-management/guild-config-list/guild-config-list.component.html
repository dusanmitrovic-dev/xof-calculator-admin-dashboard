<c-card class="mb-4">
  <c-card-header>
    Guild Configurations
    <div class="float-end">
      <!-- TODO: Add button to create new config if applicable -->
      <!-- <button cButton color="primary" size="sm">Add New Config</button> -->
    </div>
  </c-card-header>
  <c-card-body>
    <div *ngIf="loading" class="text-center">
      <c-spinner aria-hidden="true" size="sm" variant="grow"></c-spinner>
      Loading configs...
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <ng-container *ngIf="(guildConfigs$ | async) as configs">
      <div *ngIf="!loading && !errorMessage && configs.length === 0" class="alert alert-info">
        No guild configurations found or accessible.
      </div>

      <table
        *ngIf="!loading && !errorMessage && configs.length > 0"
        [hover]="true"
        [responsive]="true"
        [striped]="true"
        align="middle"
        cTable
        class="mb-0 border"
      >
        <thead cTableColor="light">
          <tr>
            <th>Guild ID</th>
            <th>Models</th>
            <th>Shifts</th>
            <th>Periods</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let config of configs">
            <td>
              <div>{{ config.guild_id }}</div>
              <!-- Optional: Display Agency Name -->
              <!-- <div class="small text-medium-emphasis">
                <span>{{ config.display_settings?.agency_name }}</span>
              </div> -->
            </td>
            <td>{{ config.models?.join(', ') || 'N/A' }}</td>
            <td>{{ config.shifts?.join(', ') || 'N/A' }}</td>
            <td>{{ config.periods?.join(', ') || 'N/A' }}</td>
            <td>
              <button cButton color="primary" variant="outline" size="sm" (click)="editConfig(config)">
                View/Edit
              </button>
              <button cButton color="danger" variant="outline" size="sm" class="ms-1" (click)="deleteConfig(config.guild_id)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </ng-container>

  </c-card-body>
</c-card>
