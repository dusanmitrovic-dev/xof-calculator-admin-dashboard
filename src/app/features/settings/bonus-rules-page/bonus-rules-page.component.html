<div class="page-container">
    <h1>Bonus Rules</h1>
     <app-config-card title="Revenue Bonus Tiers" [loading]="isLoading">
         <div card-actions>
             <button mat-stroked-button (click)="addRule()" [disabled]="isLoading">
                 <mat-icon>add</mat-icon> Add Rule
             </button>
             <button mat-flat-button color="primary" (click)="onSubmit()" [disabled]="isLoading || bonusForm.pristine || !bonusForm.valid">
                 <mat-icon>save</mat-icon> Save Changes
             </button>
         </div>
        <div card-content [formGroup]="bonusForm">
            <div formArrayName="rules">
                 <div *ngIf="rulesFormArray.controls.length === 0">No bonus rules defined.</div>

                 <div *ngFor="let ruleGroup of rulesFormArray.controls; let i = index" [formGroupName]="i" class="rule-row">
                      <mat-form-field appearance="outline">
                          <mat-label>From ($)</mat-label>
                          <input matInput type="number" formControlName="from" min="0" step="0.01" placeholder="Enter starting amount">
                           <mat-error *ngIf="ruleGroup.get('from')?.invalid">Required, >= 0</mat-error>
                      </mat-form-field>
                       <mat-form-field appearance="outline">
                          <mat-label>To ($)</mat-label>
                          <input matInput type="number" formControlName="to" min="0" step="0.01" placeholder="Enter ending amount">
                           <mat-error *ngIf="ruleGroup.get('to')?.invalid">Required, >= 0</mat-error>
                           <!-- Add cross validation error message here -->
                      </mat-form-field>
                       <mat-form-field appearance="outline">
                          <mat-label>Bonus Amount ($)</mat-label>
                          <input matInput type="number" formControlName="amount" min="0" step="0.01" placeholder="Enter bonus amount">
                           <mat-error *ngIf="ruleGroup.get('amount')?.invalid">Required, >= 0</mat-error>
                      </mat-form-field>
                     <button mat-icon-button color="warn" (click)="removeRule(i)" matTooltip="Delete Rule">
                         <mat-icon>delete</mat-icon>
                     </button>
                </div>
             </div>
         </div>
     </app-config-card>
</div>
<!-- Add Styling for .rule-row -->
<!-- e.g., .rule-row { display: flex; align-items: flex-start; gap: 16px; margin-bottom: 10px; } -->