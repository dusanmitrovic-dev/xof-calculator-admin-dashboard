<div class="modal-header">
  <h4 class="modal-title">Edit Display Settings</h4>
  <button
    type="button"
    class="btn-close"
    aria-label="Close"
    (click)="dismiss()"
  ></button>
</div>
<div class="modal-body">
  <form [formGroup]="displaySettingsForm" (ngSubmit)="save()">
    <!-- Section: Names -->
    <div class="mb-4">
      <label cLabel for="agency_name" class="mb-1">Agency Name</label>
      <input
        cFormControl
        id="agency_name"
        type="text"
        formControlName="agency_name"
        class="w-100 form-control"
        placeholder="Enter agency name"
      />
      <div
        *ngIf="
          displaySettingsForm.get('agency_name')?.invalid &&
          displaySettingsForm.get('agency_name')?.touched
        "
        class="text-danger form-text"
      >
        Agency name is required.
      </div>
    </div>
    <div class="mb-4">
      <label cLabel for="bot_name" class="mb-1">Bot Name</label>
      <input
        cFormControl
        id="bot_name"
        type="text"
        formControlName="bot_name"
        class="w-100 form-control"
        placeholder="Enter bot name"
      />
      <div
        *ngIf="
          displaySettingsForm.get('bot_name')?.invalid &&
          displaySettingsForm.get('bot_name')?.touched
        "
        class="text-danger form-text"
      >
        Bot name is required.
      </div>
    </div>
    <!-- Logo Section -->
    <div class="mb-4">
      <label cLabel for="logo_text" class="mb-1">Logo Text</label>
      <input
        cFormControl
        id="logo_text"
        type="text"
        formControlName="logo_text"
        class="w-100 form-control"
        placeholder="Enter logo text"
      />
    </div>
    <div class="mb-4">
      <label cLabel for="logo_image_base64" class="mb-1">Logo Image</label>
      <input
        id="logo_image_base64"
        type="file"
        accept="image/*"
        (change)="onLogoImageChange($event)"
        class="form-control"
      />
      <div
        *ngIf="displaySettingsForm.get('logo_image_base64')?.value"
        class="mt-2"
      >
        <img
          [src]="displaySettingsForm.get('logo_image_base64')?.value"
          alt="Logo Preview"
          class="logo-preview"
        />
      </div>
    </div>
    <!-- Section: Toggles -->
    <div class="mb-3">
      <c-form-check class="form-switch">
        <input
          cFormCheckInput
          id="ephemeral_responses"
          type="checkbox"
          formControlName="ephemeral_responses"
          [checked]="
            displaySettingsForm.get('ephemeral_responses')?.value === true
          "
        />
        <label cFormCheckLabel for="ephemeral_responses"
          >Use Ephemeral Responses</label
        >
      </c-form-check>
      <small class="text-muted ms-4">Bot replies can be seen by all.</small>
    </div>
    <div class="mb-3">
      <c-form-check class="form-switch">
        <input
          cFormCheckInput
          id="show_average"
          type="checkbox"
          formControlName="show_average"
          [checked]="displaySettingsForm.get('show_average')?.value === true"
        />
        <label cFormCheckLabel for="show_average"
          >Show Average in Reports</label
        >
      </c-form-check>
      <small class="text-muted ms-4"
        >Display average values in calculator embeds.</small
      >
    </div>
    <div class="mb-3">
      <c-form-check class="form-switch">
        <input
          cFormCheckInput
          id="show_ids"
          type="checkbox"
          formControlName="show_ids"
          [checked]="displaySettingsForm.get('show_ids')?.value === true"
        />
        <label cFormCheckLabel for="show_ids">Show IDs in Reports</label>
      </c-form-check>
      <small class="text-muted ms-4">Include earning IDs in embeds.</small>
    </div>
  </form>
</div>
<div class="modal-footer d-flex justify-content-end gap-2">
  <button type="button" class="btn btn-secondary" (click)="dismiss()">
    Cancel
  </button>
  <button
    type="button"
    class="btn btn-primary"
    (click)="save()"
    [disabled]="!displaySettingsForm.valid"
  >
    Save Display Settings
  </button>
</div>
